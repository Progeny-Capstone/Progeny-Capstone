<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="partials/head :: head('Progeny - Edit Profile')">

</head>
<body>

<!---------- TOP NAVIGATION BAR ---------->
<nav th:replace="partials/topnav :: navbar"></nav>

<!---------- Main Container ---------->
<article class="main-container">

    <!---------- CREATE ACCOUNT SECTION ---------->
    <section class="section-container">

        <!---------- CREATE ACCOUNT HEADER ---------->
        <h1 class="section-header">Edit Your personal Details</h1>

        <p class="lead mx-auto my-0 text-center">You can modify your personal information here.</p>
        <p class="mx-auto my-0 text-center"><em>Your changes will be applied after you logout.</em></p>

        <!---------- CREATE ACCOUNT FORM ---------->
        <form th:action="@{'/profile/edit/' + ${user.getUsername()}}" method="POST" th:object="${user}"
              class="form-register" id="editProfileForm">

            <!---------- SET PROFILE IMAGE ---------->
            <div class="profile-image-container d-flex flex-column my-5">

                <div class="mx-auto">

                    <!---------- USER PROFILE IMAGE ---------->
                    <img th:src=" @{ ${user.getProfileImageUrl()}}" alt="The current user's profile image"
                         class="rounded-circle mx-auto">

                    <!---------- UPLOAD PROFILE PHOTO MODAL BUTTON---------->
                    <button type="button" class="btn btn-sm" data-toggle="modal" id="open"
                            data-target=".bd-example-modal-lg">
                        <svg width="24" height="24" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd"
                             clip-rule="evenodd" class="icon-graphic-feature">
                            <path d="M8.071 21.586l-7.071 1.414 1.414-7.071 14.929-14.929 5.657 5.657-14.929 14.929zm-.493-.921l-4.243-4.243-1.06 5.303 5.303-1.06zm9.765-18.251l-13.3 13.301 4.242 4.242 13.301-13.3-4.243-4.243z"/>
                        </svg>
                    </button>

                </div>

                <!---------- UPLOAD PROFILE PHOTO MODAL---------->
                <div class="modal fade bd-example-modal-lg" tabindex="-1" role="dialog"
                     aria-labelledby="myLargeModalLabel"
                     aria-hidden="true">
                    <div class="modal-dialog modal-lg mx-auto">
                        <div class="modal-content d-flex flex-column">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                            <!---------- POPUP (FILESTACK)---------->
                            <div id="inline" style="width:600px;height:500px;padding:20px;"></div>
                        </div>
                    </div>
                </div>

            </div>


            <!---------- SET FIRST NAME ---------->
            <label for="firstName">First Name</label>
            <input class="form-control" id="firstName" th:field="*{firstName}" type="text" required
                   th:value="${user.firstName}"/>

            <!---------- SET LAST NAME ---------->
            <label for="lastName">Last Name</label>
            <input class="form-control" id="lastName" th:field="*{lastName}" type="text" required
                   th:value="${user.lastName}"/>

            <!---------- SET USERNAME ---------->
            <label for="username">Username</label>
            <input class="form-control" id="username" th:field="*{username}" type="text" required
                   th:value="${user.username}"/>

            <!---------- SET EMAIL ---------->
            <label for="email">Email</label>
            <input class="form-control" id="email" th:field="*{email}" type="email" required th:value="${user.email}"/>

            <!---------- SET LOCATION ---------->
            <label for="profileLocation">Location</label>
            <input class="form-control" id="profileLocation" th:field="*{location}" type="text"
                   th:value="${user.location}"/>

            <!---------- SET BIO ---------->
            <label for="profileBio">Profile Bio</label>
            <input class="form-control" id="profileBio" th:field="*{bio}" type="text" th:value="${user.bio}"/>


            <!---------- SUBMIT FORM ---------->
            <div class="text-right">
                <button class="btn btn-sm btn-dark" type="submit">Save</button>
            </div>

            <!---------- DANGER ZONE ---------->
            <div class="form-btn-group border border-danger text-center mt-5 py-5 d-flex flex-column text-center">

                <!---------- DANGER ZONE HEADER---------->
                <h2 class="text-danger">Danger Zone</h2>

                <!---------- DANGER ZONE DELETE BUTTON---------->
                <a th:href="@{|/profile/delete/${user.username}|}" class="text-danger"><strong>Delete
                    Account</strong></a>

            </div>

        </form>

    </section>

</article>


<!---------- FOOTER ---------->
<nav th:replace="partials/footer :: footer"></nav>

<!---------- SCRIPTS ---------->
<script th:replace="partials/scripts :: scripts"></script>
<script src="//static.filestackapi.com/filestack-js/3.x.x/filestack.min.js"></script>
<script src="/js/keys.js"></script>
<script src="/js/uploadProfilePhoto.js"></script>

</body>
</html>